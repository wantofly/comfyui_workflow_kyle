{
  "last_node_id": 380,
  "last_link_id": 907,
  "nodes": [
    {
      "id": 339,
      "type": "ControlNetLoader",
      "pos": [
        580,
        500
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            818
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "instantid\\diffusion_pytorch_model.safetensors"
      ]
    },
    {
      "id": 362,
      "type": "Note",
      "pos": [
        198,
        388
      ],
      "size": {
        "0": 365.4271240234375,
        "1": 75.59053039550781
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "face alalysis model: https://huggingface.co/MonsterMMORPG/tools/resolve/main/antelopev2.zip\n(ComfyUI/models/insightface/models/antelopev2)\n"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 363,
      "type": "Note",
      "pos": [
        200,
        514
      ],
      "size": {
        "0": 365.4271240234375,
        "1": 75.59053039550781
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "controlnet model:  https://huggingface.co/InstantX/InstantID/resolve/main/ControlNetModel/diffusion_pytorch_model.safetensors?download=true\n(ComfyUI/models/controlnet)"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 366,
      "type": "Note",
      "pos": [
        1181,
        422
      ],
      "size": {
        "0": 291.8059387207031,
        "1": 72.49397277832031
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "instantid node: https://github.com/cubiq/ComfyUI_InstantID\n(ComfyUI/custom_nodes/)"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 377,
      "type": "IPAdapterEncoder",
      "pos": [
        -540,
        -1140
      ],
      "size": {
        "0": 210,
        "1": 260
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": null,
          "label": "clip_vision"
        },
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": null,
          "slot_index": 1,
          "label": "image_1"
        },
        {
          "name": "image_2",
          "type": "IMAGE",
          "link": null,
          "slot_index": 2,
          "label": "image_2"
        },
        {
          "name": "image_3",
          "type": "IMAGE",
          "link": null,
          "slot_index": 3,
          "label": "image_3"
        },
        {
          "name": "image_4",
          "type": "IMAGE",
          "link": null,
          "slot_index": 4,
          "label": "image_4"
        }
      ],
      "outputs": [
        {
          "name": "EMBEDS",
          "type": "EMBEDS",
          "links": [],
          "shape": 3,
          "label": "EMBEDS",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterEncoder"
      },
      "widgets_values": [
        true,
        0.2,
        1,
        1,
        1,
        1
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 373,
      "type": "Note",
      "pos": [
        310,
        1320
      ],
      "size": {
        "0": 278.6827392578125,
        "1": 114.98344421386719
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "You can rewrite the prompt words to change the style of the picture, such as \n\"sico style, retro, a cute girl, outdoors, wild nature, hair oreola, hair ornaments, sunny day, flowers, ((shy weak smile)), sun hat\""
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 358,
      "type": "HighRes-Fix Script",
      "pos": [
        1170,
        1049
      ],
      "size": [
        310,
        250
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "script",
          "type": "SCRIPT",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "SCRIPT",
          "type": "SCRIPT",
          "links": [
            886
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "HighRes-Fix Script"
      },
      "widgets_values": [
        "latent",
        "(use same)",
        "ttl_nn.SDXL",
        "4x_NMKD-Siax_200k.pth",
        1.5,
        true,
        -1,
        null,
        4,
        0.5,
        1,
        false,
        "depth-zoe-xl-v1.0-controlnet.safetensors",
        0.8,
        "DepthAnythingPreprocessor",
        true
      ],
      "color": "#443322",
      "bgcolor": "#665533",
      "shape": 1
    },
    {
      "id": 336,
      "type": "ApplyInstantID",
      "pos": [
        1170,
        560
      ],
      "size": {
        "0": 315,
        "1": 266
      },
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "instantid",
          "type": "INSTANTID",
          "link": 816,
          "slot_index": 0
        },
        {
          "name": "insightface",
          "type": "FACEANALYSIS",
          "link": 817,
          "slot_index": 1
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 818,
          "slot_index": 2
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 901,
          "slot_index": 3
        },
        {
          "name": "model",
          "type": "MODEL",
          "link": 903
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 821
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 822
        },
        {
          "name": "image_kps",
          "type": "IMAGE",
          "link": 844,
          "slot_index": 7
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            887
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "POSITIVE",
          "type": "CONDITIONING",
          "links": [
            888
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "NEGATIVE",
          "type": "CONDITIONING",
          "links": [
            889
          ],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "ApplyInstantID"
      },
      "widgets_values": [
        0.6,
        0,
        1
      ]
    },
    {
      "id": 291,
      "type": "CLIPTextEncode",
      "pos": [
        610,
        1460
      ],
      "size": {
        "0": 285.6000061035156,
        "1": 96
      },
      "flags": {
        "collapsed": false
      },
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 906
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            822
          ],
          "slot_index": 0
        }
      ],
      "title": "CLIP Text Encode (Negative Prompt)",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "Signature, deformed, smooth, plastic, blurry, grainy, ((hands)), ((hand)), photo\n"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 371,
      "type": "Note",
      "pos": [
        1172,
        1352
      ],
      "size": {
        "0": 313.92462158203125,
        "1": 92.36148834228516
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "efficiency-nodes-comfyui: https://github.com/jags111/efficiency-nodes-comfyui\n(ComfyUI/custom_nodes/)"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 372,
      "type": "Note",
      "pos": [
        1608,
        1184
      ],
      "size": {
        "0": 329.3653869628906,
        "1": 96.75922393798828
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "efficiency-nodes-comfyui: https://github.com/jags111/efficiency-nodes-comfyui\n(ComfyUI/custom_nodes/)"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 290,
      "type": "CLIPTextEncode",
      "pos": [
        610,
        1310
      ],
      "size": {
        "0": 285.6000061035156,
        "1": 96
      },
      "flags": {
        "collapsed": false
      },
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 905
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            821
          ],
          "slot_index": 0
        }
      ],
      "title": "CLIP Text Encode (Positive Prompt)",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "anime, studio ghibli, ghibli style, a cute [girl], smile, split solid color background, portrait, close up, f1.2"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 357,
      "type": "KSampler (Efficient)",
      "pos": [
        1611,
        573
      ],
      "size": {
        "0": 325,
        "1": 562
      },
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 887
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 888
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 889
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 890
        },
        {
          "name": "optional_vae",
          "type": "VAE",
          "link": 891
        },
        {
          "name": "script",
          "type": "SCRIPT",
          "link": 886,
          "slot_index": 5
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": null,
          "shape": 3
        },
        {
          "name": "CONDITIONING+",
          "type": "CONDITIONING",
          "links": null,
          "shape": 3
        },
        {
          "name": "CONDITIONING-",
          "type": "CONDITIONING",
          "links": null,
          "shape": 3
        },
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": null,
          "shape": 3
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": null,
          "shape": 3
        },
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            907
          ],
          "shape": 3,
          "slot_index": 5
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler (Efficient)"
      },
      "widgets_values": [
        774852870344338,
        null,
        4,
        1.8,
        "dpmpp_sde",
        "karras",
        1,
        "auto",
        "true"
      ],
      "color": "#223322",
      "bgcolor": "#335533",
      "shape": 1
    },
    {
      "id": 345,
      "type": "EmptyLatentImage",
      "pos": [
        1172,
        878
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            890
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        832,
        1216,
        1
      ]
    },
    {
      "id": 340,
      "type": "LoadImage",
      "pos": [
        580,
        610
      ],
      "size": {
        "0": 315,
        "1": 314
      },
      "flags": {},
      "order": 10,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            901
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "title": "face",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "16481962861_640x426 (2).jpg",
        "image"
      ]
    },
    {
      "id": 338,
      "type": "InstantIDFaceAnalysis",
      "pos": [
        580,
        400
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 11,
      "mode": 0,
      "outputs": [
        {
          "name": "FACEANALYSIS",
          "type": "FACEANALYSIS",
          "links": [
            817
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "InstantIDFaceAnalysis"
      },
      "widgets_values": [
        "CPU"
      ]
    },
    {
      "id": 359,
      "type": "SaveImage",
      "pos": [
        2018,
        428
      ],
      "size": {
        "0": 1057.9310302734375,
        "1": 1107.1224365234375
      },
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 907
        }
      ],
      "title": "@Datou https://twitter.com/Datou",
      "properties": {},
      "widgets_values": [
        "Ghibli Portrait Studio/img_"
      ]
    },
    {
      "id": 346,
      "type": "LoadImage",
      "pos": [
        570,
        1600
      ],
      "size": {
        "0": 315,
        "1": 314
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            844
          ],
          "shape": 3
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3
        }
      ],
      "title": "pose",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "00000 (1).png",
        "image"
      ]
    },
    {
      "id": 360,
      "type": "Note",
      "pos": [
        130,
        978
      ],
      "size": {
        "0": 327.9326171875,
        "1": 100.0697250366211
      },
      "flags": {},
      "order": 13,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "checkpoint: \nhttps://civitai.com/models/133005?modelVersionId=357609\n(ComfyUI/models/checkpoints)\n\nIf you change the checkpoint model, please adjust the cfg and steps in ksample yourself."
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 14,
      "type": "CheckpointLoaderSimple",
      "pos": [
        480,
        970
      ],
      "size": {
        "0": 416.9157409667969,
        "1": 105.38227081298828
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            902
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            904
          ],
          "shape": 3,
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            891
          ],
          "shape": 3,
          "slot_index": 2
        }
      ],
      "title": "Load Checkpoint Base",
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "3D\\CnFaceFix.ckpt"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 380,
      "type": "Note",
      "pos": [
        168,
        1161
      ],
      "size": {
        "0": 379.2662353515625,
        "1": 82.18077850341797
      },
      "flags": {},
      "order": 15,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "lora: \nhttps://civitai.com/models/6526/studio-ghibli-style-lora\n(ComfyUI/models/loras)"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 379,
      "type": "LoraLoader",
      "pos": [
        585,
        1132
      ],
      "size": {
        "0": 315,
        "1": 126
      },
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 902
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 904
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            903
          ],
          "shape": 3,
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            905,
            906
          ],
          "shape": 3,
          "slot_index": 1
        }
      ],
      "properties": {
        "Node name for S&R": "LoraLoader"
      },
      "widgets_values": [
        "3DRole\\fashionGirl_v20SmallFileSize.safetensors",
        1,
        1
      ]
    },
    {
      "id": 337,
      "type": "InstantIDModelLoader",
      "pos": [
        580,
        280
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 16,
      "mode": 0,
      "outputs": [
        {
          "name": "INSTANTID",
          "type": "INSTANTID",
          "links": [
            816
          ],
          "shape": 3
        }
      ],
      "properties": {
        "Node name for S&R": "InstantIDModelLoader"
      },
      "widgets_values": [
        null
      ]
    },
    {
      "id": 361,
      "type": "Note",
      "pos": [
        201,
        208
      ],
      "size": {
        "0": 366.660400390625,
        "1": 128.11778259277344
      },
      "flags": {},
      "order": 17,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "instantid model: https://huggingface.co/InstantX/InstantID/resolve/main/ip-adapter.bin?download=true\n(ComfyUI/models/instantid)\n\nThe main model can be downloaded from HuggingFace and should be placed into the ComfyUI/models/instantid directory. (Note that the model is called ip_adapter as it is based on the IPAdapter models).\n"
      ],
      "color": "#223",
      "bgcolor": "#335"
    }
  ],
  "links": [
    [
      816,
      337,
      0,
      336,
      0,
      "INSTANTID"
    ],
    [
      817,
      338,
      0,
      336,
      1,
      "FACEANALYSIS"
    ],
    [
      818,
      339,
      0,
      336,
      2,
      "CONTROL_NET"
    ],
    [
      821,
      290,
      0,
      336,
      5,
      "CONDITIONING"
    ],
    [
      822,
      291,
      0,
      336,
      6,
      "CONDITIONING"
    ],
    [
      844,
      346,
      0,
      336,
      7,
      "IMAGE"
    ],
    [
      886,
      358,
      0,
      357,
      5,
      "SCRIPT"
    ],
    [
      887,
      336,
      0,
      357,
      0,
      "MODEL"
    ],
    [
      888,
      336,
      1,
      357,
      1,
      "CONDITIONING"
    ],
    [
      889,
      336,
      2,
      357,
      2,
      "CONDITIONING"
    ],
    [
      890,
      345,
      0,
      357,
      3,
      "LATENT"
    ],
    [
      891,
      14,
      2,
      357,
      4,
      "VAE"
    ],
    [
      901,
      340,
      0,
      336,
      3,
      "IMAGE"
    ],
    [
      902,
      14,
      0,
      379,
      0,
      "MODEL"
    ],
    [
      903,
      379,
      0,
      336,
      4,
      "MODEL"
    ],
    [
      904,
      14,
      1,
      379,
      1,
      "CLIP"
    ],
    [
      905,
      379,
      1,
      290,
      0,
      "CLIP"
    ],
    [
      906,
      379,
      1,
      291,
      0,
      "CLIP"
    ],
    [
      907,
      357,
      5,
      359,
      0,
      "IMAGE"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {},
  "version": 0.4
}